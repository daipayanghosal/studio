(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{511:function(e,t,a){Promise.resolve().then(a.bind(a,7339))},6813:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return i},a:function(){return c}});var s=a(7437),r=a(2265),n=a(5735),l=a(9506),o=a(6463);let d=(0,r.createContext)({user:null,loading:!0}),i=e=>{let{children:t}=e,[a,i]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),m=(0,o.usePathname)(),f=(0,o.useRouter)();if((0,r.useEffect)(()=>{let e=(0,n.Aj)(l.I,e=>{i(e),u(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{if(c)return;let e="/login"===m;a||e?a&&e&&f.push("/"):f.push("/login")},[a,c,m,f]),c)return(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"})});let x="/login"===m;return!a&&!x||a&&x?null:(0,s.jsx)(d.Provider,{value:{user:a,loading:c},children:t})},c=()=>{let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7339:function(e,t,a){"use strict";a.d(t,{default:function(){return eR}});var s=a(7437),r=a(2265),n=a(6648),l=a(9733),o=a(822),d=a(6813),i=a(9506),c=a(5735),u=a(3828),m=a(1601),f=a(926),x=a(2732),p=a(9354);let h=u.fC,g=u.xz;u.ZA,u.Uv,u.Tr,u.Ee,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...l}=e;return(0,s.jsxs)(u.fF,{ref:t,className:(0,p.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l,children:[n,(0,s.jsx)(m.Z,{className:"ml-auto"})]})}).displayName=u.fF.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(u.tu,{ref:t,className:(0,p.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=u.tu.displayName;let j=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(u.Uv,{children:(0,s.jsx)(u.VY,{ref:t,sideOffset:r,className:(0,p.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});j.displayName=u.VY.displayName;let N=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(u.ck,{ref:t,className:(0,p.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});N.displayName=u.ck.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...l}=e;return(0,s.jsxs)(u.oC,{ref:t,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(u.wU,{children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})}),r]})}).displayName=u.oC.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(u.Rk,{ref:t,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(u.wU,{children:(0,s.jsx)(x.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=u.Rk.displayName;let y=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(u.__,{ref:t,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});y.displayName=u.__.displayName;let v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(u.Z0,{ref:t,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});v.displayName=u.Z0.displayName;var b=a(4458);let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.fC,{ref:t,className:(0,p.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});w.displayName=b.fC.displayName;let C=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.Ee,{ref:t,className:(0,p.cn)("aspect-square h-full w-full",a),...r})});C.displayName=b.Ee.displayName;let k=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.NY,{ref:t,className:(0,p.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});k.displayName=b.NY.displayName;var E=a(4924),S=a(6463);function z(){var e,t;let{user:a}=(0,d.a)(),r=(0,S.useRouter)();if(!a)return null;let n=async()=>{try{await (0,c.w7)(i.I),r.push("/login")}catch(e){console.error("Error signing out:",e)}};return(0,s.jsxs)(h,{children:[(0,s.jsx)(g,{asChild:!0,children:(0,s.jsx)(l.z,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,s.jsxs)(w,{className:"h-10 w-10",children:[(0,s.jsx)(C,{src:null!==(e=a.photoURL)&&void 0!==e?e:"",alt:null!==(t=a.displayName)&&void 0!==t?t:"User"}),(0,s.jsx)(k,{children:(e=>{if(!e)return"U";let t=e.split(" ");return t.length>1?"".concat(t[0][0]).concat(t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()})(a.displayName)})]})})}),(0,s.jsxs)(j,{className:"w-56",align:"end",forceMount:!0,children:[(0,s.jsx)(y,{className:"font-normal",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:a.displayName}),(0,s.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:a.email})]})}),(0,s.jsx)(v,{}),(0,s.jsxs)(N,{onClick:n,children:[(0,s.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Sign out"})]})]})]})}var R=a(4468),A=a(3625),_=a(9847),T=a(6235),D=a(8185);function O(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)("animate-pulse rounded-md bg-muted",t),...a})}function Z(e){let t,{entry:a,onClick:n,onEdit:o,onDelete:d}=e,[i,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)("");(0,r.useEffect)(()=>{c(!0),a.content&&m((new DOMParser().parseFromString(a.content,"text/html").body.textContent||"").substring(0,100))},[a.content]);let f=a.createdAt?(0,T.WU)((null==(t=a.createdAt)?void 0:t.toDate)?t.toDate():t,"MMMM d, yyyy"):"";return(0,s.jsxs)(D.Zb,{className:"flex flex-col overflow-hidden transition-all hover:shadow-xl cursor-pointer",style:{borderTop:"4px solid ".concat(a.color)},onClick:n,children:[(0,s.jsxs)(D.Ol,{className:"flex flex-row items-start justify-between",children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[(0,s.jsx)(D.ll,{className:(0,p.cn)("font-headline"),children:a.title}),i?(0,s.jsx)(D.SZ,{children:f}):(0,s.jsx)(O,{className:"h-5 w-24"})]}),(0,s.jsxs)(h,{children:[(0,s.jsx)(g,{asChild:!0,children:(0,s.jsxs)(l.z,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(R.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,s.jsxs)(j,{align:"end",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(N,{onClick:o,children:[(0,s.jsx)(A.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,s.jsxs)(N,{onClick:d,className:"text-destructive focus:text-destructive",children:[(0,s.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,s.jsx)(D.aY,{className:"flex-grow",children:i?(0,s.jsxs)("p",{className:(0,p.cn)("text-sm text-muted-foreground"),children:[u,a.content&&u.length>=100&&"..."]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(O,{className:"h-4 w-full"}),(0,s.jsx)(O,{className:"h-4 w-2/3"})]})})]})}var I=a(2226);let M=I.fC;I.xz;let L=I.h_,U=I.x8,F=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.aV,{ref:t,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});F.displayName=I.aV.displayName;let V=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(L,{children:[(0,s.jsx)(F,{}),(0,s.jsx)(I.VY,{ref:t,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:r})]})});V.displayName=I.VY.displayName;let P=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};P.displayName="DialogHeader";let Y=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};Y.displayName="DialogFooter";let B=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.Dx,{ref:t,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});B.displayName=I.Dx.displayName;let H=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.dk,{ref:t,className:(0,p.cn)("text-sm text-muted-foreground",a),...r})});H.displayName=I.dk.displayName;var q=a(1557),J=a(8411),W=a(7629),X=a(8259),$=a(1873),G=a(4224),K=a(8484);let Q=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...l}=e;return(0,s.jsx)(K.f,{ref:t,decorative:n,orientation:r,className:(0,p.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...l})});Q.displayName=K.f.displayName;var ee=a(7568);let et=ee.fC,ea=ee.xz,es=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:n=4,...l}=e;return(0,s.jsx)(ee.h_,{children:(0,s.jsx)(ee.VY,{ref:t,align:r,sideOffset:n,className:(0,p.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});es.displayName=ee.VY.displayName;var er=a(4386);let en=(0,a(3027).j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),el=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,...l}=e;return(0,s.jsx)(er.f,{ref:t,className:(0,p.cn)(en({variant:r,size:n,className:a})),...l})});el.displayName=er.f.displayName;let eo=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff"];function ed(e){let{editorRef:t}=e,a=(e,a)=>{t.current&&(t.current.focus(),document.execCommand(e,!1,a))},[n,o]=(0,r.useState)({}),d=(0,r.useCallback)(()=>{let e={};document.queryCommandState&&(e.bold=document.queryCommandState("bold"),e.italic=document.queryCommandState("italic"),e.underline=document.queryCommandState("underline")),o(e)},[]);return(0,r.useEffect)(()=>{let e=t.current;if(e){let t=()=>{d()};return document.addEventListener("selectionchange",t),e.addEventListener("input",d),e.addEventListener("click",d),e.addEventListener("keydown",d),()=>{document.removeEventListener("selectionchange",t),e.removeEventListener("input",d),e.removeEventListener("click",d),e.removeEventListener("keydown",d)}}},[t,d]),(0,s.jsxs)("div",{className:"flex items-center gap-1 border border-input border-b-0 p-2 bg-muted/50 rounded-t-md sticky top-0 z-10",children:[(0,s.jsx)(el,{size:"sm",pressed:n.bold,onPressedChange:()=>a("bold"),"aria-label":"Bold",children:(0,s.jsx)(q.Z,{className:"h-4 w-4"})}),(0,s.jsx)(el,{size:"sm",pressed:n.italic,onPressedChange:()=>a("italic"),"aria-label":"Italic",children:(0,s.jsx)(J.Z,{className:"h-4 w-4"})}),(0,s.jsx)(el,{size:"sm",pressed:n.underline,onPressedChange:()=>a("underline"),"aria-label":"Underline",children:(0,s.jsx)(W.Z,{className:"h-4 w-4"})}),(0,s.jsx)(Q,{orientation:"vertical",className:"h-6 mx-1"}),(0,s.jsx)(el,{size:"sm",onPressedChange:()=>a("insertUnorderedList"),"aria-label":"Bullet List",children:(0,s.jsx)(X.Z,{className:"h-4 w-4"})}),(0,s.jsx)(el,{size:"sm",onPressedChange:()=>a("insertOrderedList"),"aria-label":"Numbered List",children:(0,s.jsx)($.Z,{className:"h-4 w-4"})}),(0,s.jsx)(Q,{orientation:"vertical",className:"h-6 mx-1"}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsx)(l.z,{variant:"ghost",size:"sm",className:"p-2",children:(0,s.jsx)(G.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(es,{className:"w-auto p-2",children:(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1",children:eo.map(e=>(0,s.jsx)(l.z,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full",style:{backgroundColor:e},onClick:()=>a("foreColor",e),"aria-label":"Set text color to ".concat(e)},e))})})]})]})}var ei=a(6763),ec=a(9066),eu=a(4729),em=a(4732);let ef=["#77BEF0","#FFCB61","#FF894F","#EA5B6F"];function ex(e){let{isOpen:t,setIsOpen:a,entry:n,onSave:o}=e,[d,i]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,f]=(0,r.useState)(ef[0]),[x,h]=(0,r.useState)(!1),g=(0,r.useRef)(null),j=(0,r.useRef)(""),{toast:N}=(0,ei.pm)();(0,r.useEffect)(()=>{t&&(h(!0),n?(i(n.title),j.current=n.content,g.current&&(g.current.innerHTML=n.content),u(n.content),f(n.color)):(i(""),j.current="",g.current&&(g.current.innerHTML=""),u(""),f(ef[0])),h(!1))},[n,t]);let y=!d.trim();return(0,s.jsx)(M,{open:t,onOpenChange:a,children:(0,s.jsxs)(V,{className:"w-full h-full max-w-full max-h-full sm:max-w-4xl sm:max-h-[90vh] flex flex-col p-0 gap-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)(P,{className:"flex-row items-center gap-4",children:[(0,s.jsx)(G.Z,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsx)(B,{className:"text-lg font-medium",children:n?"Edit Entry":"New Entry"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(l.z,{type:"button",onClick:()=>{var e;let t=(null===(e=g.current)||void 0===e?void 0:e.innerHTML)||"";if(!d.trim()){N({title:"Title is required",description:"Please enter a title for your journal entry.",variant:"destructive"});return}let s={title:d,content:t,color:m};n?o({...n,...s,updatedAt:new Date}):o({...s,createdAt:new Date,updatedAt:new Date}),a(!1)},disabled:x,children:[x?(0,s.jsx)(ec.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(eu.Z,{className:"mr-2 h-4 w-4"}),x?"Saving...":"Save"]}),(0,s.jsx)(U,{asChild:!0,children:(0,s.jsxs)(l.z,{type:"button",variant:"ghost",children:[(0,s.jsx)(em.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})})]})]}),(0,s.jsxs)("div",{className:"flex-grow flex flex-col md:flex-row min-h-0",children:[(0,s.jsx)("main",{className:"flex-grow flex flex-col p-4 md:p-8 overflow-y-auto",children:x?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(O,{className:"h-12 w-full"}),(0,s.jsx)(O,{className:"h-64 w-full"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("input",{id:"title",value:d,onChange:e=>i(e.target.value),placeholder:"Your Title Here...",className:"text-3xl md:text-4xl font-extrabold tracking-tight w-full bg-transparent focus:outline-none"})}),(0,s.jsxs)("div",{className:"flex-grow relative",children:[(0,s.jsx)(ed,{editorRef:g}),(0,s.jsx)("div",{ref:g,id:"editor",contentEditable:!y,onInput:e=>{g.current&&(j.current=g.current.innerHTML)},suppressContentEditableWarning:!0,className:(0,p.cn)("prose dark:prose-invert max-w-none min-h-[40vh] p-4 focus:outline-none rounded-b-md border-x border-b border-input relative",y&&"bg-muted/50 cursor-not-allowed"),style:{borderColor:m},dangerouslySetInnerHTML:{__html:c}}),y&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground select-none pointer-events-none",children:"Enter a title to start writing"})]})]})}),(0,s.jsxs)("aside",{className:"w-full md:w-64 border-t md:border-t-0 md:border-l bg-muted/50 p-4 space-y-4 overflow-y-auto",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"Entry Color"}),(0,s.jsx)("div",{className:"grid grid-cols-5 md:grid-cols-4 gap-2",children:ef.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>f(e),className:(0,p.cn)("h-10 w-full rounded-md border-2 transition-all",m===e?"ring-2 ring-ring ring-offset-2 ring-offset-background":"border-transparent"),style:{backgroundColor:e},"aria-label":"Set color to ".concat(e)},e))})]})]})]})})}function ep(e){let t,{isOpen:a,setIsOpen:r,entry:n,onEdit:o}=e;return a?(0,s.jsx)(M,{open:a,onOpenChange:r,children:(0,s.jsxs)(V,{className:"sm:max-w-4xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)(P,{children:[(0,s.jsx)(B,{className:(0,p.cn)("font-headline text-3xl"),children:n.title}),n.createdAt&&(0,s.jsx)(H,{children:(0,T.WU)((null==(t=n.createdAt)?void 0:t.toDate)?t.toDate():t,"MMMM d, yyyy 'at' h:mm a")})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto pr-4 -mx-4 px-6 prose dark:prose-invert max-w-none whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:n.content}}),(0,s.jsxs)(Y,{className:"mt-4",children:[(0,s.jsx)(U,{asChild:!0,children:(0,s.jsx)(l.z,{type:"button",variant:"outline",children:"Close"})}),(0,s.jsxs)(l.z,{type:"button",onClick:o,children:[(0,s.jsx)(A.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]})}):null}var eh=a(9842),eg=a(9546);let ej=eg.fC;eg.xz;let eN=eg.h_,ey=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.aV,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});ey.displayName=eg.aV.displayName;let ev=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{}),(0,s.jsx)(eg.VY,{ref:t,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});ev.displayName=eg.VY.displayName;let eb=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};eb.displayName="AlertDialogHeader";let ew=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ew.displayName="AlertDialogFooter";let eC=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.Dx,{ref:t,className:(0,p.cn)("text-lg font-semibold",a),...r})});eC.displayName=eg.Dx.displayName;let ek=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.dk,{ref:t,className:(0,p.cn)("text-sm text-muted-foreground",a),...r})});ek.displayName=eg.dk.displayName;let eE=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.aU,{ref:t,className:(0,p.cn)((0,l.d)(),a),...r})});eE.displayName=eg.aU.displayName;let eS=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.$j,{ref:t,className:(0,p.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});function ez(e){let{isOpen:t,onClose:a,onConfirm:r}=e;return(0,s.jsx)(ej,{open:t,onOpenChange:a,children:(0,s.jsxs)(ev,{children:[(0,s.jsxs)(eb,{children:[(0,s.jsx)(eC,{children:"Are you absolutely sure?"}),(0,s.jsx)(ek,{children:"This action cannot be undone. This will permanently delete your journal entry."})]}),(0,s.jsxs)(ew,{children:[(0,s.jsx)(eS,{onClick:a,children:"Cancel"}),(0,s.jsx)(eE,{onClick:r,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})}function eR(){let{user:e}=(0,d.a)(),{entries:t,addEntry:a,updateEntry:c,deleteEntry:u,loading:m}=function(e){let[t,a]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=()=>{};if(e){n(!0);let s=(0,eh.hJ)(i.db,"users",e,"entries"),r=(0,eh.IO)(s,(0,eh.Xo)("updatedAt","desc"));t=(0,eh.cf)(r,e=>{a(e.docs.map(e=>({id:e.id,...e.data()}))),n(!1)},e=>{console.error("Error fetching journal entries:",e),a([]),n(!1)})}else a([]),n(!1);return()=>t()},[e]),{entries:t,addEntry:async t=>{if(e)try{let a=(0,eh.hJ)(i.db,"users",e,"entries");await (0,eh.ET)(a,{...t,createdAt:(0,eh.Bt)(),updatedAt:(0,eh.Bt)()})}catch(e){console.error("Error adding entry: ",e)}},updateEntry:async t=>{if(e){let{id:a,...s}=t,r=(0,eh.JU)(i.db,"users",e,"entries",a);try{await (0,eh.r7)(r,{...s,updatedAt:(0,eh.Bt)()})}catch(e){console.error("Error updating entry: ",e)}}},deleteEntry:async t=>{if(e)try{await (0,eh.oe)((0,eh.JU)(i.db,"users",e,"entries",t))}catch(e){console.error("Error deleting entry: ",e)}},loading:s}}(null==e?void 0:e.uid),[f,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),k=()=>{h(null),x(!0)},E=e=>{h(e),j(!1),x(!0)},S=e=>{C(e),b(!0)},R=e=>{y(e),j(!0)};return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("header",{className:"sticky top-0 z-10 border-b bg-background/80 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(n.default,{src:"/appicon.png",alt:"ChronoCanvas Logo",width:40,height:40,className:"rounded-md","data-ai-hint":"logo"})}),(0,s.jsx)("div",{className:"flex-1 text-center",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 font-headline",children:"ChronoCanvas"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(l.z,{onClick:k,className:"hidden sm:flex",children:[(0,s.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"New Entry"]}),(0,s.jsx)(z,{})]})]})}),(0,s.jsx)("main",{className:"container mx-auto p-4 sm:p-6 md:p-8",children:m?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-700 p-12 text-center h-[50vh]",children:[(0,s.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading your journal..."})]}):t.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.map(e=>(0,s.jsx)(Z,{entry:e,onClick:()=>R(e),onEdit:()=>E(e),onDelete:()=>S(e.id)},e.id))}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-700 p-12 text-center h-[50vh]",children:[(0,s.jsx)("h2",{className:"text-xl font-medium text-gray-700 dark:text-gray-300",children:"Your journal is empty"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Start by creating your first entry."}),(0,s.jsxs)(l.z,{onClick:k,className:"mt-6",children:[(0,s.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Create New Entry"]})]})}),(0,s.jsxs)(l.z,{onClick:k,variant:"default",className:"sm:hidden fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg",children:[(0,s.jsx)(o.Z,{className:"h-6 w-6"}),(0,s.jsx)("span",{className:"sr-only",children:"New Entry"})]}),(0,s.jsx)(ex,{isOpen:f,setIsOpen:x,entry:p,onSave:e=>{"id"in e?c(e):a(e)}}),N&&(0,s.jsx)(ep,{isOpen:g,setIsOpen:j,entry:N,onEdit:()=>E(N)}),(0,s.jsx)(ez,{isOpen:v,onClose:()=>b(!1),onConfirm:()=>{w&&u(w),b(!1),C(null)}})]})}eS.displayName=eg.$j.displayName},9733:function(e,t,a){"use strict";a.d(t,{d:function(){return d},z:function(){return i}});var s=a(7437),r=a(2265),n=a(3355),l=a(3027),o=a(9354);let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:i=!1,...c}=e,u=i?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(d({variant:r,size:l,className:a})),ref:t,...c})});i.displayName="Button"},8185:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},SZ:function(){return i},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var s=a(7437),r=a(2265),n=a(9354);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});i.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},6763:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(2265);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],i={toasts:[]};function c(e){i=o(i,e),d.forEach(e=>{e(i)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(i);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9506:function(e,t,a){"use strict";a.d(t,{I:function(){return o},db:function(){return d}});var s=a(5236),r=a(5735),n=a(9842);let l=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyB1E5IAVYmFsClrFx4s5k65Iv8HnJvJxIY",authDomain:"chronocanvas-nakny.firebaseapp.com",projectId:"chronocanvas-nakny",storageBucket:"chronocanvas-nakny.firebasestorage.app",messagingSenderId:"1092336481608",appId:"1:1092336481608:web:6806ada9653c2b8b602f7d"}),o=(0,r.v0)(l),d=(0,n.ad)(l)},9354:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(4839),r=a(6164);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[358,728,59,947,291,870,971,23,744],function(){return e(e.s=511)}),_N_E=e.O()}]);